<!DOCTYPE html>
<!-- Created by CodingLab |www.youtube.com/CodingLabYT-->
<html lang="en" dir="ltr">
  <head>
    <!-- cal -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <title>Event Calendar</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/4.3.1/materia/bootstrap.min.css"
    />
    <link rel="stylesheet" href=" style/calander.css" />
    <!-- cal -->
    <!--<title> Drop Down Sidebar Menu | CodingLab </title>-->
    <link rel="stylesheet" href="style/index.css" />
    <!-- Boxiocns CDN Link -->
    <link
      href="https://unpkg.com/boxicons@2.0.7/css/boxicons.min.css"
      rel="stylesheet"
    />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://kit.fontawesome.com/b99e675b6e.js"></script>
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script>
      $(document).ready(function () {
        $(".profile .icon_wrap").click(function () {
          $(this).parent().toggleClass("active");
          $(".notifications").removeClass("active");
        });

        $(".notifications .icon_wrap").click(function () {
          $(this).parent().toggleClass("active");
          $(".profile").removeClass("active");
        });

        $(".show_all .link").click(function () {
          $(".notifications").removeClass("active");
          $(".popup").show();
        });

        $(".close").click(function () {
          $(".popup").hide();
        });
      });
    </script>
  </head>
  <body>
    <div class="sidebar close">
      <div class="logo-details">
        <i class="bx bxl-c-plus-plus"></i>
        <span class="logo_name">HighLAnder</span>
      </div>
      <ul class="nav-links">
        <li>
          <div class="iocn-link">
            <a href="#">
              <i class="bx bx-grid-alt"></i>
              <span class="link_name">Home</span>
            </a>
            <i class="bx bxs-chevron-down arrow"></i>
          </div>
          <ul class="sub-menu">
            <li><a class="link_name" href="#">Home</a></li>
            <li><a href="dashboard.html">Dashboard</a></li>
          </ul>
        </li>
        <li>
          <div class="iocn-link">
            <a href="#">
              <i class="bx bx-collection"></i>
              <span class="link_name">Human Resources</span>
            </a>
            <i class="bx bxs-chevron-down arrow"></i>
          </div>
          <ul class="sub-menu">
            <li><a class="link_name" href="#">Human Resources</a></li>
            <li><a href="rule.html">Rules And Regulation</a></li>
            <li><a href="calander.html">Calender</a></li>
            <li><a href="complain.html">HR Complaint Form</a></li>
          </ul>
        </li>
        <li>
          <div class="iocn-link">
            <a href="#">
              <i class="bx bx-book-alt"></i>
              <span class="link_name">Staff Tour</span>
            </a>
            <i class="bx bxs-chevron-down arrow"></i>
          </div>
          <ul class="sub-menu">
            <li><a class="link_name" href="#">Staff Tour</a></li>
            <li><a href="travel.html">Travel Authorization</a></li>
            <li><a href="status.html">Travel Status</a></li>
          </ul>
        </li>
        <li>
          <div class="iocn-link">
            <a href="#">
              <i class="bx bx-pie-chart-alt-2"></i>
              <span class="link_name">Staff Service</span>
            </a>
            <i class="bx bxs-chevron-down arrow"></i>
          </div>
          <ul class="sub-menu">
            <li><a class="link_name" href="#">Staff Service</a></li>
            <li><a href="leave.html">Leave Application</a></li>
            <li><a href="promotion.html">Promotion</a></li>
            <li><a href="resignation.html">Resignation</a></li>
            <li><a href="publication.html">Publication</a></li>
          </ul>
        </li>
        <li>
          <div class="iocn-link">
            <a href="#">
              <i class="bx bx-grid-alt"></i>
              <span class="link_name">Inventory And Property</span>
            </a>
            <i class="bx bxs-chevron-down arrow"></i>
          </div>
          <ul class="sub-menu">
            <li><a class="link_name" href="#">Inventory And Property</a></li>
            <li><a href="reservation.html">Reservation</a></li>
            <li><a href="orders.html">Orders</a></li>
            <li><a href="feedback.html">Feedback</a></li>
          </ul>
        </li>

        <li>
          <a href="#">
            <i class="bx bx-cog"></i>
            <span class="link_name">Setting</span>
          </a>
          <ul class="sub-menu blank">
            <li><a class="link_name" href="#">Setting</a></li>
          </ul>
        </li>
        <li>
          <div class="profile-details">
            <div class="profile-content">
              <img src="style/profile_pic.png" alt="profileImg" />
            </div>
            <div class="name-job">
              <div class="profile_name">Kunzang</div>
              <div class="job">Web Desginer</div>
            </div>
            <i class="bx bx-log-out"></i>
          </div>
        </li>
      </ul>
    </div>
    <section class="home-section">
      <div class="home-content">
        <i class="bx bx-menu"></i>
        <span class="text"></span>
        <div class="wrapper">
          <div class="navbar">
            <div class="navbar_left">
              <div class="logo">
                <a href="#">HighLAnder</a>
              </div>
            </div>

            <div class="navbar_right">
              <div class="notifications">
                <!-- <div class="icon_wrap"><i class="far fa-bell"></i></div> -->
                <a class="icon_wrap" href="profile.html#timeline">
                  <i class="far fa-bell"></i
                ></a>
              </div>
              <div class="profile">
                <div class="icon_wrap">
                  <img src="style/profile_pic.png" alt="profile_pic" />
                  <span class="name">Kunzang Rada</span>
                  <i class="fas fa-chevron-down"></i>
                </div>
                <div class="profile_dd">
                  <ul class="profile_ul">
                    <li class="profile_li">
                      <a class="profile" href="profile.html"
                        ><span class="picon"
                          ><i class="fas fa-user-alt"></i> </span
                        >Profile</a
                      >
                      <!-- <div class="btn">My Account</div> -->
                    </li>
                    <li>
                      <a class="address" href="changePaaword.html"
                        ><span class="picon"
                          ><i class="fas fa-map-marker"></i></span
                        >Change Password</a
                      >
                    </li>
                    <li>
                      <a class="settings" href="help.html"
                        ><span class="picon"><i class="fas fa-cog"></i></span
                        >Help</a
                      >
                    </li>
                    <li>
                      <a class="logout" href="index.html"
                        ><span class="picon"
                          ><i class="fas fa-sign-out-alt"></i></span
                        >Logout</a
                      >
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <h1 style="margin: 150px auto 30px auto; text-align: center">
        Event Calendar
      </h1>
      <div id="app"></div>
    </section>
    <script>
      let arrow = document.querySelectorAll(".arrow");
      for (var i = 0; i < arrow.length; i++) {
        arrow[i].addEventListener("click", (e) => {
          let arrowParent = e.target.parentElement.parentElement; //selecting main parent of arrow
          arrowParent.classList.toggle("showMenu");
        });
      }
      let sidebar = document.querySelector(".sidebar");
      let sidebarBtn = document.querySelector(".bx-menu");
      console.log(sidebarBtn);
      sidebarBtn.addEventListener("click", () => {
        sidebar.classList.toggle("close");
      });
    </script>
    <!-- calandar -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
      integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
      integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
      crossorigin="anonymous"
    ></script>
    <script src="calander.js"></script>
    <script>
      "use strict";

      //Public Globals
      const days = [
        "Sunday",
        "Monday",
        "Tuesday",
        "Wedensday",
        "Thursday",
        "Friday",
        "Saturday",
      ];
      const months = [
        "January",
        "February",
        "March",
        "April",
        "May",
        "June",
        "July",
        "August",
        "September",
        "October",
        "November",
        "December",
      ];

      let c_date = new Date();
      let day = c_date.getDay();
      let month = c_date.getMonth();
      let year = c_date.getFullYear();

      (function App() {
        const calendar = `<div class="container">
      
            <div class="row">
                <div class="col-sm-6 col-12 d-flex">
                    <div class="card border-0 mt-5 flex-fill">
                        <div class="card-header py-3 d-flex justify-content-between">
                            <span class="prevMonth">&#10096;</span>
                            <span><strong id="s_m"></strong></span>
                            <span class="nextMonth">&#10097;</span>
                        </div>
                        <div class="card-body px-1 py-3">
                            <div class="table-responsive">
                                <table class="table table-sm table-borderless">
                                    <thead class="days text-center">
                                        <tr>
                                            ${Object.keys(days)
                                              .map(
                                                (key) =>
                                                  `<th><span>${days[
                                                    key
                                                  ].substring(
                                                    0,
                                                    3
                                                  )}</span></th>`
                                              )
                                              .join(
                                                ""
                                              )}                                            
                                        </tr>
                                    </thead>
                                    <tbody id="dates" class="dates text-center"></tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-sm-6 col-12 d-flex pa-sm">
                    <div class="card border-0 mt-5 flex-fill d-none" id="event">
                        <div class="card-header py-3 text-center">
                            Add Event
                            <button type="button" class="close hide">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="card-body px-1 py-3">
                            <div class="text-center">
                                <span class="event-date">06 June 2020</span><br>
                                <span class="event-day">Monday</span>
                            </div> 
                            <div class="events-today my-3 px-3">
                               
                            </div> 
                            <div class="input-group events-input mb-3 col-10 mx-auto mt-2">
                                <input type="text" class="form-control" placeholder="Add Event" id="eventTxt">
                                <div class="input-group-append">
                                    <button class="btn btn-danger" type="button" id="createEvent">+</button>
                                </div>
                            </div>                        
                        </div>
                    </div>                            
                </div>
            </div>
        </div>
        <div aria-live="polite" aria-atomic="true" style="position: relative; min-height: 200px;">
            <div class="toast" style="position: absolute; top: 0; right: 15px;" data-delay="3000">
                <div class="toast-header">
                <strong class="mr-auto">Calendar</strong>
                <small>Just now</small>
                <button type="button" class="ml-2 mb-1 close" data-dismiss="toast" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                </div>
                <div class="toast-body">
                    
                </div>
            </div>
        </div>`;
        document.getElementById("app").innerHTML = calendar;
      })();

      function renderCalendar(m, y) {
        //Month's first weekday
        let firstDay = new Date(y, m, 1).getDay();
        //Days in Month
        let d_m = new Date(y, m + 1, 0).getDate();
        //Days in Previous Month
        let d_pm = new Date(y, m, 0).getDate();

        let table = document.getElementById("dates");
        table.innerHTML = "";
        let s_m = document.getElementById("s_m");
        s_m.innerHTML = months[m] + " " + y;
        let date = 1;
        //remaing dates of last month
        let r_pm = d_pm - firstDay + 1;
        for (let i = 0; i < 6; i++) {
          let row = document.createElement("tr");
          for (let j = 0; j < 7; j++) {
            if (i === 0 && j < firstDay) {
              let cell = document.createElement("td");
              let span = document.createElement("span");
              let cellText = document.createTextNode(r_pm);
              span.classList.add("ntMonth");
              span.classList.add("prevMonth");
              cell.appendChild(span).appendChild(cellText);
              row.appendChild(cell);
              r_pm++;
            } else if (date > d_m && j < 7) {
              if (j !== 0) {
                let i = 0;
                for (let k = j; k < 7; k++) {
                  i++;
                  let cell = document.createElement("td");
                  let span = document.createElement("span");
                  let cellText = document.createTextNode(i);
                  span.classList.add("ntMonth");
                  span.classList.add("nextMonth");
                  cell.appendChild(span).appendChild(cellText);
                  row.appendChild(cell);
                }
              }
              break;
            } else {
              let cell = document.createElement("td");
              let span = document.createElement("span");
              let cellText = document.createTextNode(date);
              span.classList.add("showEvent");
              if (
                date === c_date.getDate() &&
                y === c_date.getFullYear() &&
                m === c_date.getMonth()
              ) {
                span.classList.add("bg-danger");
              }
              cell.appendChild(span).appendChild(cellText);
              row.appendChild(cell);
              date++;
            }
          }
          table.appendChild(row);
        }
      }
      renderCalendar(month, year);

      $(function () {
        function showEvent(eventDate) {
          let storedEvents = JSON.parse(localStorage.getItem("events"));
          if (storedEvents == null) {
            $(".events-today").html(
              '<h5 class="text-center">No events found</h5 class="text-center">'
            );
          } else {
            let eventsToday = storedEvents.filter(
              (eventsToday) => eventsToday.eventDate === eventDate
            );
            let eventsList = Object.keys(eventsToday).map(
              (k) => eventsToday[k]
            );
            if (eventsList.length > 0) {
              let eventsLi = "";
              eventsList.forEach((event) =>
                $(".events-today").html(
                  (eventsLi += `<div class="alert alert-danger alert-dismissible fade show" role="alert">
                    ${event.eventText}
                    <button type="button" class="close remove-event" data-event-id="${event.id}" data-dismiss="alert" aria-label="Close">
                      <span aria-hidden="true">&times;</span>
                    </button>
                  </div>`)
                )
              );
            } else {
              $(".events-today").html(
                '<h5 class="text-center">No events found</h5 class="text-center">'
              );
            }
          }
        }
        function removeEvent(id) {
          let storedEvents = JSON.parse(localStorage.getItem("events"));
          if (storedEvents != null) {
            storedEvents = storedEvents.filter((ev) => ev.id != id);
            localStorage.setItem("events", JSON.stringify(storedEvents));
            $(".toast-body").html("Your event have been removed");
            $(".toast").toast("show");
          }
        }
        $(document).on("click", ".remove-event", function () {
          let eventId = $(this).data("event-id");
          removeEvent(eventId);
        });

        $(document).on("click", ".prevMonth", function () {
          year = month === 0 ? year - 1 : year;
          month = month === 0 ? 11 : month - 1;
          renderCalendar(month, year);
        });
        $(document).on("click", ".nextMonth", function () {
          year = month === 11 ? year + 1 : year;
          month = (month + 1) % 12;
          renderCalendar(month, year);
        });

        $(document).on("click", ".showEvent", function () {
          $(".showEvent").removeClass("active");
          $("#event").removeClass("d-none");
          $(this).addClass("active");
          let todaysDate = $(this).text() + " " + months[month] + " " + year;
          let eventDay = days[new Date(year, month, $(this).text()).getDay()];
          let eventDate = $(this).text() + month + year;
          $(".event-date").html(todaysDate).data("eventdate", eventDate);
          $(".event-day").html(eventDay);
          showEvent(eventDate);
        });
        $(document).on("click", ".hide", function () {
          $("#event").addClass("d-none");
        });
        $(document).on("click", "#createEvent", function () {
          let events = localStorage.getItem("events");
          let obj = [];
          if (events) {
            obj = JSON.parse(events);
          }
          let eventDate = $(".event-date").data("eventdate");
          let eventText = $("#eventTxt").val();
          let valid = false;
          $("#eventTxt").removeClass("data-invalid");
          $(".error").remove();
          if (eventText == "") {
            $(".events-input").append(
              `<span class="error">Please enter event</span>`
            );
            $("#eventTxt").addClass("data-invalid");
            $("#eventTxt").trigger("focus");
          } else if (eventText.length < 3) {
            $("#eventTxt").addClass("data-invalid");
            $("#eventTxt").trigger("focus");
            $(".events-input").append(
              `<span class="error">please enter at least three characters</span>`
            );
          } else {
            valid = true;
          }
          if (valid) {
            let id = 1;
            if (obj.length > 0) {
              id =
                Math.max.apply(
                  "",
                  obj.map(function (entry) {
                    return parseFloat(entry.id);
                  })
                ) + 1;
            } else {
              id = 1;
            }
            obj.push({
              id: id,
              eventDate: eventDate,
              eventText: eventText,
            });
            localStorage.setItem("events", JSON.stringify(obj));
            $("#eventTxt").val("");
            $(".toast-body").html("Your event have been added");
            $(".toast").toast("show");
            showEvent(eventDate);
          }
        });
      });
    </script>
  </body>
</html>
