<!DOCTYPE html>
<!-- Created by CodingLab |www.youtube.com/CodingLabYT-->
<html lang="en" dir="ltr">
  <head>
    <meta charset="UTF-8" />
    <!--<title> Drop Down Sidebar Menu | CodingLab </title>-->
    <link rel="stylesheet" href="style/index.css" />
    <link rel="stylesheet" href="style/leave.css" />
    <!-- Boxiocns CDN Link -->
    <link
      href="https://unpkg.com/boxicons@2.0.7/css/boxicons.min.css"
      rel="stylesheet"
    />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://kit.fontawesome.com/b99e675b6e.js"></script>
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script>
      $(document).ready(function () {
        $(".profile .icon_wrap").click(function () {
          $(this).parent().toggleClass("active");
          $(".notifications").removeClass("active");
        });

        $(".notifications .icon_wrap").click(function () {
          $(this).parent().toggleClass("active");
          $(".profile").removeClass("active");
        });

        $(".show_all .link").click(function () {
          $(".notifications").removeClass("active");
          $(".popup").show();
        });

        $(".close").click(function () {
          $(".popup").hide();
        });
      });
    </script>
  </head>
  <body>
    <div class="sidebar close">
      <div class="logo-details">
        <i class="bx bxl-c-plus-plus"></i>
        <span class="logo_name">HighLAnder</span>
      </div>
      <ul class="nav-links">
        <li>
          <div class="iocn-link">
            <a href="#">
              <i class="bx bx-grid-alt"></i>
              <span class="link_name">Home</span>
            </a>
            <i class="bx bxs-chevron-down arrow"></i>
          </div>
          <ul class="sub-menu">
            <li><a class="link_name" href="#">Home</a></li>
            <li><a href="dashboard.html">Dashboard</a></li>
          </ul>
        </li>
        <li>
          <div class="iocn-link">
            <a href="#">
              <i class="bx bx-collection"></i>
              <span class="link_name">Human Resources</span>
            </a>
            <i class="bx bxs-chevron-down arrow"></i>
          </div>
          <ul class="sub-menu">
            <li><a class="link_name" href="#">Human Resources</a></li>
            <li><a href="complain.html">HR Complaint</a></li>
            <li><a href="rule.html">Rules And Regulation</a></li>
            <li><a href="calander.html">Calender</a></li>
          </ul>
        </li>
        <li>
          <div class="iocn-link">
            <a href="#">
              <i class="bx bx-book-alt"></i>
              <span class="link_name">Staff Tour</span>
            </a>
            <i class="bx bxs-chevron-down arrow"></i>
          </div>
          <ul class="sub-menu">
            <li><a class="link_name" href="#">Staff Tour</a></li>
            <li><a href="travel.html">Travel Authorization</a></li>
            <li><a href="status.html">Travel status</a></li>
          </ul>
        </li>
        <li>
          <div class="iocn-link">
            <a href="#">
              <i class="bx bx-pie-chart-alt-2"></i>
              <span class="link_name">Staff Service</span>
            </a>
            <i class="bx bxs-chevron-down arrow"></i>
          </div>
          <ul class="sub-menu">
            <li><a class="link_name" href="#">Staff Service</a></li>
            <li><a href="leave.html">Leave Application</a></li>
            <li><a href="promotion.html">Promotion</a></li>
            <li><a href="resignation.html">Resignation</a></li>
            <li><a href="publication.html">Publication</a></li>
          </ul>
        </li>
        <li>
          <div class="iocn-link">
            <a href="#">
              <i class="bx bx-grid-alt"></i>
              <span class="link_name">Inventory And Property</span>
            </a>
            <i class="bx bxs-chevron-down arrow"></i>
          </div>
          <ul class="sub-menu">
            <li><a class="link_name" href="#">Inventory And Property</a></li>
            <li><a href="reservation.html">Reservation</a></li>
            <li><a href="orders.html">Orders</a></li>
            <li><a href="feedback.html">Feedback</a></li>
          </ul>
        </li>
      
        <li>
          <a href="#">
            <i class="bx bx-cog"></i>
            <span class="link_name">Setting</span>
          </a>
          <ul class="sub-menu blank">
            <li><a class="link_name" href="#">Setting</a></li>
          </ul>
        </li>
        <li>
          <div class="profile-details">
            <div class="profile-content">
              <img src="style/profile_pic.png" alt="profileImg" />
            </div>
            <div class="name-job">
              <div class="profile_name">Kunzang</div>
              <div class="job">Web Desginer</div>
            </div>
            <i class="bx bx-log-out"></i>
          </div>
        </li>
      </ul>
    </div>
    <section class="home-section">
      <div class="home-content">
        <i class="bx bx-menu"></i>
        <span class="text"></span>
        <div class="wrapper">
          <div class="navbar">
            <div class="navbar_left">
              <div class="logo">
                <a href="#">HighLAnder</a>
              </div>
            </div>

            <div class="navbar_right">
              <div class="notifications">
                <!-- <div class="icon_wrap"><i class="far fa-bell"></i></div> -->
                <a class="icon_wrap" href="profile.html#timeline">
                  <i class="far fa-bell"></i
                ></a>
              </div>
              <div class="profile">
                <div class="icon_wrap">
                  <img src="style/profile_pic.png" alt="profile_pic" />
                  <span class="name">Kunzang Rada</span>
                  <i class="fas fa-chevron-down"></i>
                </div>
                <div class="profile_dd">
                  <ul class="profile_ul">
                    <li class="profile_li">
                      <a class="profile" href="profile.html"
                        ><span class="picon"
                          ><i class="fas fa-user-alt"></i> </span
                        >Profile</a
                      >
                      <!-- <div class="btn">My Account</div> -->
                    </li>
                    <li>
                      <a class="address" href="changePaaword.html"
                        ><span class="picon"
                          ><i class="fas fa-map-marker"></i></span
                        >Change Password</a
                      >
                    </li>
                    <li>
                      <a class="settings" href="help.html"
                        ><span class="picon"><i class="fas fa-cog"></i></span
                        >Help</a
                      >
                    </li>
                    <li>
                      <a class="logout" href="index.html"
                        ><span class="picon"
                          ><i class="fas fa-sign-out-alt"></i></span
                        >Logout</a
                      >
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="container">
        <div class="content" id="container1">
            
          <p>
            <h1 >Travel Authorization</h1>
            <hr style="margin-bottom: 20px;">
            ***Please add the travel authorization details prior to filling the travel details.
          </p>
          <form action="sucess.html" method="get" class="form">
            <div class="user-details">
              <div class="input-box">
                <span class="details"><b>Travel Authorization Date:</b></span>
                <input type="date" placeholder="Authorization Date" id="Authorization" />
                <small></small>
              </div>
              <br />
              <div class="input-box">
                <span class="details"><b>Estimate No. of Days:</b></span>
                <input
                  type="text"
                  placeholder="Travel Days"
                  required
                  id="Estimate"
                />
                <small></small>

              </div>
              <br />
              <div class="input-box">
                <span class="details"><b>Start Date</b></span>
                <input
                  type="date"
                  placeholder="Start Date"
                  required
                  disabld
                  id="Start"
                  
                />
                <small></small>

              </div>
              <br />
              <div class="input-box">
                <span class="details"><b>End Date:</b></span>
                <input type="date" placeholder="End Date" required id="End" />
                <small></small>

              </div>
              <br />
              <div class="input-box">
                <span class="details"><b>Estimated Travel Expense Nu:</b></span>
                <input type="text" placeholder="Travel Expense" required id="Expense" />
                <small></small>

              </div>
              <br />
              <div class="input-box">
                <span class="details"><b>Advance Required Nu:</b></span>
                <input type="text" placeholder="Advance Money" required id="Advance" />
                <small></small>

              </div>
              <br />
              <div class="input-box">
                <span class="details"><b>From Station:</b></span>
                <input type="text" placeholder="From" required id="From" />
                <small></small>

              </div>
              <br />
              <div class="input-box">
                <span class="details"><b>To Station:</b></span>
                <input type="text" placeholder="Destination" required id="Destination" />
                <small></small>

              </div>
              <br />
              <div class="input-box">
                <span class="details"><b>Mode of Travel:</b></span>
                <input type="text" placeholder="Private/Government" required id="Mode" />
                <small></small>

              </div>
              <br />
              <div class="input-box" style="margin-top:10px ;">
                <span class="details" style="width: 500px;"><b>Pupose of Tour:</b></span>
                <textarea
                  id="purpose"
                  type="text"
                  placeholder="Type leave reason..."
                  rows="7"
                  cols="120"
                  required
                ></textarea>
              </div>
              <br>
              <div style="margin-top:10px">
                <div class="input-box">
                    <span class="details" style="width:800px ;margin-bottom: 10px;"><b>Officiating Staff: <p>(This is an optional field. If you are approving authority then you need to select your officiating or else don't select)</p></b></span>
                    <textarea
                      id="officiating"
                      type="text"
                      placeholder="Type leave reason..."
                      rows="5"
                      cols="120"
                       ></textarea>
                    <small></small>
    
                  </div>
                  <br />
    
                  <div class="input-box" id="Dinput">
                    <span class="details" id="Ddetail"><b>Supporting Document(optional)</b></span>
                    <input type="file" placeholder="Upload.." required id="document" required/>
    
                  </div>
              </div>
              
              <br />
            </div>
            <div class="rbutton-details">
              <input type="radio" name="rbutton" id="dot-1" />
              <input type="radio" name="rbutton" id="dot-2" />
              <input type="radio" name="rbutton" id="dot-3" />
              <span class="rbutton-title"><b> Allow Notification</b></span>
              <div class="category">
                <label for="dot-1">
                  <span class="dot one"></span>
                  <span class="rbutton">YES</span>
                </label>
                <label for="dot-2">
                  <span class="dot two"></span>
                  <span class="rbutton">NO</span>
                </label>
                <label for="dot-3">
                  <span class="dot three"></span>
                  <span class="rbutton">Calls Only</span>
                </label>
              </div>

            </div>
            <br />
              <div id="leave-btn">
                <button type="submit" value="Submit" id="submitBtn">Submit</button>
                <button type="reset" onclick="reset">Reset</button>
              </div>
            <br />
          </form>
        </div>
              
      <div class="container2 list">
        <div class="nestedContainer2">
          <h3 style="color: black;">Travel Details</h3>
          <hr>
          <table id="stdList" style="margin-top: 15px;">
              <thead>
                <tr>
                    <th>Sl.No</th>
                    <th>From</th>
                    <th>From Station</th>
                    <th>To Station</th>
                    <th>To </th>
                    <th>Mode Of Travel</th>
                    <th>Status</th>
                    <td rowspan="2">Action</td>
                    <td rowspan="2">Action</td>
                </tr>
              </thead>
              <tbody>
  
              </tbody>
          </table>
        </div>
    </div>
      </div>
    </section>
    <script>
      let arrow = document.querySelectorAll(".arrow");
      for (var i = 0; i < arrow.length; i++) {
        arrow[i].addEventListener("click", (e) => {
          let arrowParent = e.target.parentElement.parentElement; //selecting main parent of arrow
          arrowParent.classList.toggle("showMenu");
        });
      }
      let sidebar = document.querySelector(".sidebar");
      let sidebarBtn = document.querySelector(".bx-menu");
      console.log(sidebarBtn);
      sidebarBtn.addEventListener("click", () => {
        sidebar.classList.toggle("close");
      });
    </script>
    <script src="travel.js"></script>
    <script>
      const button = document.querySelector("#submitBtn");
//getting the element from the html file
const usernameE1 = document.querySelector("#Authorization");
// const passwordE1 = document.querySelector("#Password");
const form = document.querySelector("#container1");

button.addEventListener("click", function (e) {
  let isUsernameValid = checkUsername();
  let isFormValid = isUsernameValid; //submit to server if the form is valid
  if (isFormValid) {
    var formData = readFormData();
    if (selectedRow == null) insertNewRecord(formData);
    else updateFormData(formData);
    resetForm();
    // var formDa
    confirm("Are you sure you want to submit."); //to get final confirmation or to reset the data if the information is wrong.
    return true;
  } else {
    e.preventDefault(); //prevent the form from submitting
  }
});

//function to validate the username
const checkUsername = () => {
  let valid = false;
  const min = 3,
    max = 25;
  const username = usernameE1.value.trim(); //trim is going to remove the space before and after the text and give text only
  //calling the showerror function with two arguments
  if (!isRequired(username)) {
    showError(usernameE1, "Cannot be blank.");
  } else {
    showSuccess(usernameE1);
    valid = true;
  }
  return valid;
};

//reusable code
//Function to check whether the input section is empty or not
const isRequired = (value) => (value === "" ? false : true);
//Function to check the length of the the character in the input section
const isBetween = (length, min, max) =>
  length < min || length > max ? false : true;

//reusable code
//Regulating the css classes according to the validation
const showError = (input, message) => {
  //get the form field element
  const formField = input.parentElement;
  //add the error class
  formField.classList.remove("success");
  formField.classList.add("error");
  //show the error message
  const error = formField.querySelector("small");
  error.textContent = message;
};

const showSuccess = (input) => {
  //get the form field element
  const formField = input.parentElement;
  //remove the error class
  formField.classList.remove("error");
  formField.classList.add("success");
  //hide the error message
  const error = formField.querySelector("small");
  error.textContent = "";
};

function readFormData() {
  var formData = {};
  formData["Start"] = document.getElementById("Start").value;
  formData["From"] = document.getElementById("From").value;
  formData["Destination"] = document.getElementById("End").value;
  formData["End"] = document.getElementById("Destination").value;
  formData["Mode"] = document.getElementById("Mode").value;
  //   formData["Mode"] = document.getElementById("Mode").value;
  //   formData["reason"] = document.getElementById("reason").value;
  formData["status"] = Status;
  return formData;
}

var SlNo = 0;
var Status = "Pending";
function insertNewRecord(data) {
  SlNo++;
  var table = document
    .getElementById("stdList")
    .getElementsByTagName("tbody")[0];
  var newRow = table.insertRow(table.lenght);
  cell1 = newRow.insertCell(0);
  cell1.innerHTML = SlNo;

  cell2 = newRow.insertCell(1);
  cell2.innerHTML = data.Start;

  cell3 = newRow.insertCell(2);
  cell3.innerHTML = data.From;

  cell4 = newRow.insertCell(3);
  cell4.innerHTML = data.End;

  cell5 = newRow.insertCell(4);
  cell5.innerHTML = data.Destination;

  cell6 = newRow.insertCell(5);
  cell6.innerHTML = data.Mode;

  cell7 = newRow.insertCell(6);
  cell7.innerHTML = Status;

  //   cell8 = newRow.insertCell(7);
  //   cell8.innerHTML = Status;

  cell8 = newRow.insertCell(7);
  cell8.innerHTML = '<a onClick="onEdit(this)">Edit</a>';
  cell9 = newRow.insertCell(8);
  cell9.innerHTML = '<a onClick="onDelete(this)">Delete</a>';
}

function onEdit(td) {
  selectedRow = td.parentElement.parentElement;
  document.getElementById("Start").value = selectedRow.cells[0].innerHTML;
  document.getElementById("From").value = selectedRow.cells[1].innerHTML;
  document.getElementById("End").value = selectedRow.cells[2].innerHTML;
  document.getElementById("Destination").value = selectedRow.cells[3].innerHTML;
  document.getElementById("Mode").value = selectedRow.cells[4].innerHTML;
  //   document.getElementById("Mode").value = selectedRow.cells[5].innerHTML;
  //   document.getElementById("reason").value = selectedRow.cells[6].innerHTML;
  // document.getElementById("status").value = selectedRow.cells[7].innerHTML;
}

var selectedRow = null;

function resetForm() {
  document.getElementById("Start").value = "";
  document.getElementById("From").value = "";
  document.getElementById("End").value = "";
  document.getElementById("Destination").value = "";
  document.getElementById("Mode").value = "";
  //   document.getElementById("Mode").value = "";
  //   document.getElementById("reason").value = "";
  // document.getElementById("status").value = "";
  selectedRow = null;
}

function updateFormData(formData) {
  selectedRow.cells[0].innerHTML = formData.Start;
  selectedRow.cells[1].innerHTML = formData.From;
  selectedRow.cells[2].innerHTML = formData.End;
  selectedRow.cells[3].innerHTML = formData.Destination;
  selectedRow.cells[4].innerHTML = formData.Mode;
  //   selectedRow.cells[5].innerHTML = formData.Mode;
  //   selectedRow.cells[6].innerHTML = formData.reason;
  // selectedRow.cells[7].innerHTML = formData.status;
}
function onDelete(td) {
  if (confirm("Are You Sure to DELETE this record")) {
    row = td.parentElement.parentElement;
    document.getElementById("stdList").deleteRow(row.rowIndex);
    resetForm();
  }
}

    </script>
  </body>
</html>
